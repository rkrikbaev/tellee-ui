<link rel="import" href="../polymer/polymer.html" />

<link rel="import" href="../px-d3-imports/px-d3-imports.html" />
<script src="d3-timelines.js"></script>

<style type="text/css">
    .axis path,
    .axis line {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
    }

    .axis text {
        font-family: sans-serif;
        font-size: 10px;
    }

    .timeline-label {
        font-family: sans-serif;
        font-size: 12px;
    }

    #timeline2 .axis {
		transform: translate(0px, 40px);
		-ms-transform: translate(0px, 40px);
		/* IE 9 */
		-webkit-transform: translate(0px, 40px);
		/* Safari and Chrome */
		-o-transform: translate(0px, 40px);
		/* Opera */
		-moz-transform: translate(0px, 40px);
		/* Firefox */
    }

    .coloredDiv {
		height: 40px;
		width: 20px;
		float: left;
    }

	div.tooltip {
		position: absolute;
		text-align: center;
		width: 60px;
		height: 28px;
		padding: 2px;
		font: 12px sans-serif;
		background: lightsteelblue;
		border: 0px;
		border-radius: 8px;
		pointer-events: none;
	}
</style>



<dom-module id="polymer-d3-timeline">
    <template id="template">
            <div width="100%" id="timeline"></div>
    </template>
</dom-module>



<script>
  Polymer({

    is: 'polymer-d3-timeline',

    /**
     * Properties block, expose attribute values to the DOM via 'reflect'
     *
     * @property properties
     * @type Object
     */
    properties: {
      /**
       * Current value of the gauge.
       * @property value
       * @type {Array}
       * @default `0`
       */
			data: {
				type: Array,
				value: []
			},
			label: {
				type: String,
				value: []
			},
			width: {
				type: Number,
				value: 300,
				observer: '_changeWidth'
      },
			height: {
				type: String,
				value: 300
			}
		},
		
		_changeWidth: function () {
			if (this.width) {
				this.properties.width = this.width;
			}
		},

		attached: function () {
			this.properties.data = this.data;
      var testData = [
				{ label: this.label, times: this.properties.data },
      ];
      var chart = d3.timelines();

      var svg = d3.select(this.$$('#timeline')).append("svg").attr("width", this.properties.width)
        .datum(testData).call(chart);
    }

  });
</script>
